================================================================================
PROJECT EXPORT
Root Directory: C:\Users\lenovo\Desktop\numerology\elana-reborn
Generated: export_project.py
================================================================================

--------------------------------------------------------------------------------
FILE: .env.local
SIZE: 119 bytes
--------------------------------------------------------------------------------

GEMINI_API_KEY=AIzaSyCvav3b5slQ9a8sJH-KfeK0D5TRi5fzXqw

# Gemini Model Configuration
GEMINI_MODEL=gemini-flash-latest


--------------------------------------------------------------------------------
FILE: next-env.d.ts
SIZE: 251 bytes
--------------------------------------------------------------------------------
/// <reference types="next" />
/// <reference types="next/image-types/global" />
import "./.next/dev/types/routes.d.ts";

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.


--------------------------------------------------------------------------------
FILE: next.config.ts
SIZE: 133 bytes
--------------------------------------------------------------------------------
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
};

export default nextConfig;


--------------------------------------------------------------------------------
FILE: package.json
SIZE: 912 bytes
--------------------------------------------------------------------------------
{
  "name": "elana-reborn",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@google/generative-ai": "^0.24.1",
    "@react-pdf/renderer": "^4.3.1",
    "@tailwindcss/typography": "^0.5.19",
    "astronomy-engine": "^2.1.19",
    "clsx": "^2.1.1",
    "framer-motion": "^12.23.26",
    "lucide-react": "^0.559.0",
    "next": "16.0.8",
    "react": "19.2.1",
    "react-dom": "19.2.1",
    "react-markdown": "^10.1.0",
    "react-tsparticles": "^2.12.2",
    "tailwind-merge": "^3.4.0",
    "tsparticles-slim": "^2.12.0"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "16.0.8",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}


--------------------------------------------------------------------------------
FILE: project_export.txt
SIZE: 0 bytes
--------------------------------------------------------------------------------


--------------------------------------------------------------------------------
FILE: README.md
SIZE: 4094 bytes
--------------------------------------------------------------------------------
# Elana Reborn - Numerology & Astrology Analysis App

A modern Lithuanian numerology and astrology application that combines ancient wisdom with AI-powered analysis to provide personalized cosmic insights.

## Features

- üåü **Personal Numerology Analysis**: Calculate life path numbers, expression, soul urge, and personality numbers
- üîÆ **Zodiac Integration**: Full zodiac sign calculations with cosmic interpretations
- üéÅ **Gift Analysis**: Create personalized numerology reports as gifts for others
- ü§ñ **AI-Powered**: Uses Google Gemini AI for deep, personalized interpretations
- üé® **Modern UI**: Beautiful cosmic-themed design with particle animations
- üì± **Responsive**: Works seamlessly on desktop and mobile devices
- üá±üáπ **Lithuanian Localized**: Fully in Lithuanian language

## Tech Stack

- **Frontend**: Next.js 16, React 19, TypeScript
- **Styling**: Tailwind CSS with custom cosmic theme
- **Animations**: Framer Motion, React TSParticles
- **AI**: Google Gemini AI
- **Icons**: Lucide React
- **Fonts**: Inter & Playfair Display

## Getting Started

### Prerequisites

- Node.js 18+ 
- Google Gemini API key

### Installation

1. Clone the repository:
```bash
git clone <repository-url>
cd elana-reborn
```

2. Install dependencies:
```bash
npm install
```

3. Set up environment variables:
```bash
cp .env.local.example .env.local
```

4. Configure your Gemini API key in `.env.local`:
```env
# Get your API key from https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_actual_gemini_api_key_here
GEMINI_MODEL=gemini-flash-latest
```

5. Run the development server:
```bash
npm run dev
```

6. Open [http://localhost:3000](http://localhost:3000) in your browser.

## Project Structure

```
src/
‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ api/analyze/       # AI analysis API endpoint
‚îÇ   ‚îú‚îÄ‚îÄ globals.css        # Global styles
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx         # Root layout
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx           # Home page
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ features/          # Main feature components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalculatorForm.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AnalysisResult.tsx
‚îÇ   ‚îú‚îÄ‚îÄ layout/            # Layout components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Navbar.tsx
‚îÇ   ‚îî‚îÄ‚îÄ ui/                # Reusable UI components
‚îÇ       ‚îú‚îÄ‚îÄ Input.tsx
‚îÇ       ‚îî‚îÄ‚îÄ ParticlesBackground.tsx
‚îî‚îÄ‚îÄ lib/
    ‚îú‚îÄ‚îÄ numerology.ts      # Numerology calculations
    ‚îî‚îÄ‚îÄ utils.ts           # Utility functions
```

## Numerology Calculations

The app implements the Pythagorean numerology system with Lithuanian alphabet support:

- **Life Path Number**: Calculated from birth date
- **Expression Number**: Derived from full name
- **Soul Urge Number**: Calculated from vowels in name
- **Personality Number**: Calculated from consonants in name
- **Zodiac Sign**: Traditional Western astrology calculations

## API Endpoints

### POST /api/analyze

Generates personalized numerology analysis using AI.

**Request Body:**
```json
{
  "name": "Vardas",
  "surname": "Pavardƒó", 
  "birthDate": "1990-05-15",
  "gender": "male|female",
  "type": "self|gift",
  "giver": "Dovanotojo vardas", // optional
  "occasion": "Proga" // optional
}
```

## Development Commands

```bash
npm run dev      # Start development server
npm run build    # Build for production
npm run start    # Start production server
npm run lint     # Run ESLint
```

## Environment Variables

- `GEMINI_API_KEY`: Your Google Gemini API key (required)
- `GEMINI_MODEL`: Gemini model to use (default: gemini-flash-latest)

## Deployment

### Vercel (Recommended)

1. Connect your repository to Vercel
2. Add your `GEMINI_API_KEY` as an environment variable
3. Deploy automatically

### Other Platforms

```bash
npm run build
npm run start
```

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Run tests and linting
5. Submit a pull request

## License

This project is licensed under the MIT License.

## Support

For issues and questions, please open an issue on GitHub.


--------------------------------------------------------------------------------
FILE: tailwind.config.ts
SIZE: 2097 bytes
--------------------------------------------------------------------------------
import type { Config } from "tailwindcss";
import typography from '@tailwindcss/typography';

const config: Config = {
  content: [
    "./src/pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/components/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ["var(--font-inter)", "sans-serif"],
        heading: ["var(--font-playfair)", "serif"],
      },
      colors: {
        // Cosmic Dark Backgrounds
        'dark-bg': {
          200: '#1a1a2e', // Medium cosmic blue
          300: '#0f0f23', // Deep cosmic blue
        },
        // Brand Colors (Cosmic/Purple theme)
        primary: {
          300: '#a78bfa', // Light purple
          600: '#7c3aed', // Purple
        },
        // Text Colors
        'text-light': '#9ca3af',
        'text-medium': '#d1d5db',
      },
      backgroundImage: {
        'hero-glow': 'radial-gradient(circle at 50% 0%, rgba(167, 139, 250, 0.25) 0%, transparent 50%)',
        'card-gradient': 'linear-gradient(145deg, rgba(167, 139, 250, 0.1), rgba(15, 15, 35, 0.8))',
      },
      boxShadow: {
        'glow': '0 0 20px rgba(167, 139, 250, 0.3)',
        'purple-glow': '0 0 20px rgba(167, 139, 250, 0.3)',
      },
      animation: {
        'gradient-flow': 'gradient-flow 3s linear infinite',
        'float': 'float 6s ease-in-out infinite',
        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
        'fade-in-up': 'fade-in-up 0.6s ease-out',
      },
      keyframes: {
        'gradient-flow': {
          '0%': { backgroundPosition: '0% 50%' },
          '50%': { backgroundPosition: '100% 50%' },
          '100%': { backgroundPosition: '0% 50%' },
        },
        'float': {
          '0%, 100%': { transform: 'translateY(0px)' },
          '50%': { transform: 'translateY(-20px)' },
        },
        'fade-in-up': {
          '0%': { opacity: '0', transform: 'translateY(20px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' },
        },
      },
    },
  },
  plugins: [
    typography,
  ],
};
export default config;


--------------------------------------------------------------------------------
FILE: tsconfig.json
SIZE: 666 bytes
--------------------------------------------------------------------------------
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}


--------------------------------------------------------------------------------
FILE: src\app\globals.css
SIZE: 1292 bytes
--------------------------------------------------------------------------------
@import "tailwindcss";

:root {
  --background: #020617;
  --foreground: #e2e8f0;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-inter);
  --font-serif: var(--font-playfair);
}

@media (prefers-color-scheme: light) {
  :root {
    --background: #ffffff;
    --foreground: #0f172a;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-inter), system-ui, -apple-system, sans-serif;
}

/* Custom font utilities */
.font-playfair {
  font-family: var(--font-playfair), Georgia, serif;
}

.font-inter {
  font-family: var(--font-inter), system-ui, -apple-system, sans-serif;
}

/* Custom animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* Gradient text utility */
.gradient-text {
  @apply text-transparent bg-clip-text bg-gradient-to-r from-amber-200 via-purple-200 to-blue-200;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #0f172a;
}

::-webkit-scrollbar-thumb {
  background: #475569;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}


--------------------------------------------------------------------------------
FILE: src\app\layout.tsx
SIZE: 814 bytes
--------------------------------------------------------------------------------
import type { Metadata } from "next";
import { Inter, Playfair_Display } from "next/font/google";
import "./globals.css";

const inter = Inter({ subsets: ["latin"], variable: "--font-inter" });
const playfair = Playfair_Display({ 
  subsets: ["latin"], 
  variable: "--font-playfair" 
});

export const metadata: Metadata = {
  title: "AstroNumerology | J≈´s≈≥ Asmeninis Kosmoso ≈Ωemƒólapis",
  description: "Profesionalios astrologinƒós ir numerologinƒós analizƒós, sugeneruotos AI.",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="lt" className="scroll-smooth">
      <body className={`${inter.variable} ${playfair.variable} font-sans bg-slate-950 text-slate-200 antialiased`}>
        {children}
      </body>
    </html>
  );
}


--------------------------------------------------------------------------------
FILE: src\app\page.tsx
SIZE: 6161 bytes
--------------------------------------------------------------------------------
import { Navbar } from "../components/layout/Navbar";
import { Footer } from "../components/layout/Footer";
import ParticlesBackground from "../components/ui/ParticlesBackground";
import { CalculatorForm } from "../components/features/CalculatorForm";
import { ArrowRight, Info } from "lucide-react";

export default function Home() {
  return (
    <>
      <Navbar />
      
      <main className="min-h-screen bg-dark-bg-300 text-text-medium font-sans relative overflow-hidden">
        
        {/* HERO SECTION */}
        <section id="hero" className="relative min-h-screen flex items-center justify-center pt-20 pb-16 overflow-hidden">
          
          {/* 1. Particles Layer */}
          <div className="absolute inset-0 z-10 opacity-60 pointer-events-none">
             <ParticlesBackground />
          </div>

          {/* 2. Background Decor (Orbs & Grid) */}
          <div className="absolute inset-0 z-0">
            {/* Grid Pattern */}
            <div className="absolute inset-0 opacity-20" 
                 style={{ backgroundImage: 'linear-gradient(to right, rgba(167, 139, 250, 0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(167, 139, 250, 0.1) 1px, transparent 1px)', backgroundSize: '40px 40px' }} />
            
            {/* Gradient Orbs */}
            <div className="absolute -top-[20%] -left-[10%] w-[700px] h-[700px] rounded-full bg-purple-600/20 blur-[120px] animate-pulse-slow" />
            <div className="absolute bottom-[10%] -right-[10%] w-[600px] h-[600px] rounded-full bg-pink-500/10 blur-[100px] animate-pulse-slow" style={{ animationDelay: '2s' }} />
            
            {/* Floating Numbers (Legacy Feature) */}
            <div className="absolute top-1/4 left-1/4 text-7xl font-heading font-bold text-white/5 animate-float pointer-events-none">33</div>
            <div className="absolute bottom-1/3 right-1/4 text-8xl font-heading font-bold text-white/5 animate-float pointer-events-none" style={{ animationDelay: '-3s' }}>7</div>
          </div>

          {/* 3. Main Content */}
          <div className="container mx-auto px-4 relative z-20 text-center max-w-5xl mx-auto">
            
            {/* Badge */}
            <div className="inline-flex items-center px-4 py-2 rounded-full bg-white/5 border border-white/10 backdrop-blur-md text-purple-200 text-sm font-medium mb-8 animate-fade-in-up">
              <span className="w-2 h-2 rounded-full bg-pink-500 mr-2 animate-pulse shadow-[0_0_10px_rgba(236,72,153,0.5)]"></span>
              J≈´s≈≥ Asmeninis Kosminis Para≈°as
            </div>

            {/* Headline */}
            <h1 className="text-5xl md:text-7xl font-heading font-extrabold text-white mb-6 leading-tight animate-fade-in-up" style={{ animationDelay: '0.1s' }}>
              Atraskite Savo <br className="hidden md:block" />
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-500 to-purple-400 animate-gradient-flow bg-[length:200%_auto]">
                Kosmoso KodƒÖ
              </span>
            </h1>

            {/* Description */}
            <p className="text-lg md:text-xl text-text-medium mb-10 max-w-2xl mx-auto leading-relaxed animate-fade-in-up" style={{ animationDelay: '0.2s' }}>
              Sujungƒóme senovƒós numerologijos i≈°mintƒØ su moderniu AI, kad sukurtume
              <span className="text-white font-medium"> tobulƒÖ dovanƒÖ</span> arba giliƒÖ ƒØ≈ævalgƒÖ Jums.
            </p>

            {/* Buttons */}
            <div className="flex flex-col sm:flex-row items-center justify-center gap-4 animate-fade-in-up" style={{ animationDelay: '0.3s' }}>
              <button className="group relative px-8 py-4 bg-gradient-to-r from-primary-600 to-pink-600 text-white rounded-xl font-bold shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 hover:scale-105 transition-all duration-200 flex items-center gap-2">
                Sukurti Analizƒô Dabar
                <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
              </button>
              
              <button className="px-8 py-4 bg-transparent border border-white/20 text-white rounded-xl font-semibold hover:bg-white/5 hover:border-purple-400/50 transition-all flex items-center gap-2">
                Su≈æinoti Daugiau
                <Info className="w-5 h-5" />
              </button>
            </div>

          </div>
        </section>

        {/* Calculator Form Section */}
        <section className="relative -mt-20 z-30 px-4 pb-20">
          <CalculatorForm />
        </section>

        {/* FEATURES SECTION */}
        <section className="py-20 bg-dark-bg-200 relative z-10">
          <div className="container mx-auto px-4">
            <div className="text-center mb-16">
              <h2 className="text-3xl md:text-4xl font-heading font-bold text-white mb-4">Kodƒól verta rinktis mus?</h2>
              <p className="text-slate-400 max-w-2xl mx-auto">Mes nejudame pavir≈°iumi. M≈´s≈≥ algoritmai sujungia t≈´kstantmetƒô i≈°mintƒØ su moderniausiu AI.</p>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
              {[
                { title: "Mokslinis Tikslumas", desc: "Naudojame NASA duomenis planet≈≥ pozicijoms skaiƒçiuoti.", icon: "üåå" },
                { title: "Gili Psichologija", desc: "AI analizuoja ne tik 'kƒÖ', bet ir 'kodƒól' ‚Äì j≈´s≈≥ motyvus ir baimes.", icon: "üß†" },
                { title: "Tobula Dovana", desc: "PDF knyga paruo≈°ta spausdinimui ‚Äì idealu gimtadieniams.", icon: "üéÅ" }
              ].map((item, i) => (
                <div key={i} className="p-8 rounded-2xl bg-white/5 border border-white/5 hover:border-purple-500/30 transition-all">
                  <div className="text-4xl mb-4">{item.icon}</div>
                  <h3 className="text-xl font-bold text-white mb-2">{item.title}</h3>
                  <p className="text-slate-400 text-sm">{item.desc}</p>
                </div>
              ))}
            </div>
          </div>
        </section>

      </main>

      <Footer />
    </>
  );
}


--------------------------------------------------------------------------------
FILE: src\app\api\analyze\route.ts
SIZE: 3539 bytes
--------------------------------------------------------------------------------
import { NextRequest, NextResponse } from "next/server";
import { GoogleGenerativeAI } from "@google/generative-ai";
import { calculateLifePath, calculatePlanetaryPositions, calculateNameNumbers } from "../../../lib/numerology";
import { 
  GET_IDENTITY_PROMPT, 
  GET_EMOTIONAL_PROMPT, 
  GET_KARMA_PROMPT, 
  GET_CAREER_PROMPT, 
  GET_FUTURE_PROMPT 
} from "../../../lib/prompts";
import { FullReport } from "../../../types/analysis";

// Helper to parse AI JSON response safely
const parseAIResponse = (text: string) => {
  try {
    // Remove markdown code blocks if AI adds them
    const cleanText = text.replace(/```json/g, '').replace(/```/g, '').trim();
    return JSON.parse(cleanText);
  } catch (e) {
    console.error("JSON Parse Error:", e);
    return null;
  }
};

export async function POST(req: NextRequest) {
  const apiKey = process.env.GEMINI_API_KEY;
  if (!apiKey) return NextResponse.json({ error: "No API Key" }, { status: 500 });
  
  const genAI = new GoogleGenerativeAI(apiKey);
  const model = genAI.getGenerativeModel({ 
    model: "gemini-1.5-flash", 
    generationConfig: { responseMimeType: "application/json" } 
  });

  const body = await req.json();
  const { name, surname, birthDate } = body;

  // 1. Calculations
  const lifePath = calculateLifePath(birthDate);
  const fullName = `${name} ${surname}`;
  const numbers = calculateNameNumbers(fullName);
  const planets = calculatePlanetaryPositions(new Date(birthDate));
  
  const promptData = {
    name, 
    lifePath,
    expression: numbers.expression,
    personality: numbers.personality,
    zodiac: planets.sun, 
    moonSign: planets.moon, 
    venusSign: planets.venus,
    marsSign: planets.mars,
    jupiterSign: planets.jupiter,
    saturnSign: planets.saturn
  };

  try {
    // 2. Parallel Generation (5 Requests!)
    const [identityRes, emotionalRes, karmaRes, careerRes, futureRes] = await Promise.all([
      model.generateContent(GET_IDENTITY_PROMPT(promptData)),
      model.generateContent(GET_EMOTIONAL_PROMPT(promptData)),
      model.generateContent(GET_KARMA_PROMPT(promptData)),
      model.generateContent(GET_CAREER_PROMPT(promptData)),
      model.generateContent(GET_FUTURE_PROMPT(promptData))
    ]);

    // 3. Parse Responses
    const sections = [
      parseAIResponse(identityRes.response.text()),
      parseAIResponse(emotionalRes.response.text()),
      parseAIResponse(karmaRes.response.text()),
      parseAIResponse(careerRes.response.text()),
      parseAIResponse(futureRes.response.text())
    ].filter(Boolean); // Filter out any failed parses

    // 4. Construct Master JSON with IDs and Types
    const report: FullReport = {
      meta: {
        user: `${name} ${surname}`,
        birthDate,
        generatedAt: new Date().toISOString()
      },
      planetaryData: { // POPULATE THIS
        sun: planets.sun,
        moon: planets.moon,
        mercury: planets.mercury,
        venus: planets.venus,
        mars: planets.mars,
        jupiter: planets.jupiter,
        saturn: planets.saturn,
        lifePath,
        soulUrge: numbers.soulUrge
      },
      sections: sections.map((sec, index) => ({
        id: `sec-${index}`,
        type: "text_chapter",
        title: sec.title,
        blocks: sec.blocks
      }))
    };

    return NextResponse.json(report);

  } catch (error) {
    console.error(error);
    const errorMessage = error instanceof Error ? error.message : "Unknown error occurred";
    return NextResponse.json({ error: errorMessage }, { status: 500 });
  }
}


--------------------------------------------------------------------------------
FILE: src\components\features\AnalysisResult.tsx
SIZE: 5925 bytes
--------------------------------------------------------------------------------
"use client";
import ReactMarkdown from 'react-markdown';
import { Sparkles, Download, Loader2 } from 'lucide-react';
import { PDFDownloadLink } from "@react-pdf/renderer";
import { NumerologyReportPdf } from "../pdf/NumerologyReportPdf";
import { useEffect, useState } from 'react';
import { FullReport, AnalysisSection } from '../../types/analysis';
import { LockedSection } from '../ui/LockedSection';
import { PlanetaryGrid } from './PlanetaryGrid';

interface AnalysisResultProps {
  content: string | FullReport;
  userData?: {
    name: string;
    surname: string;
    birthDate: string;
  }
}

export function AnalysisResult({ content, userData }: AnalysisResultProps) {
  const [isClient, setIsClient] = useState(false);
  const [isUnlocked, setIsUnlocked] = useState(false); // New State

  useEffect(() => {
    const timeoutId = setTimeout(() => setIsClient(true), 0);
    return () => clearTimeout(timeoutId);
  }, []);

  // Helper to simulate payment
  const handlePayment = () => {
    // In real app: Redirect to Stripe
    alert("Imituojamas apmokƒójimas... Sƒókmƒó!");
    setIsUnlocked(true);
  };

  const isFullReport = (c: string | FullReport): c is FullReport => Boolean(c && typeof c === 'object' && 'sections' in c);

  if (!isFullReport(content)) return <div>Legacy content error</div>;

  const report = content as FullReport;
  
  // Separate Free vs Paid sections
  // Assuming API returns sections in order: Identity (0), Emotional (1), Karma (2), Career (3), Future (4)
  const freeSection = report.sections[0]; 
  const emotionalSection = report.sections[1];
  // Sections to lock
  const lockedSections = report.sections.slice(2); 

  // Helper to render a section
  const renderSection = (section: AnalysisSection) => (
    <div key={section.id} className="mb-12 last:mb-0">
      <h3 className="text-2xl font-heading font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-200 to-white mb-6 border-b border-white/10 pb-2">
        {section.title}
      </h3>
      <div className="space-y-8">
        {section.blocks.map((block, idx) => (
          <div key={idx} className="bg-white/5 rounded-2xl p-6 border border-white/5 hover:border-purple-500/30 transition-colors">
            <h4 className="text-lg font-bold text-purple-200 mb-3 flex items-center gap-2">
              <span className="text-xl">{block.icon === 'sun' ? '‚òÄÔ∏è' : block.icon === 'moon' ? 'üåô' : '‚ú®'}</span>
              {block.title}
            </h4>
            <div className="prose prose-invert prose-p:text-slate-300 max-w-none text-sm leading-relaxed">
              <ReactMarkdown>{block.content}</ReactMarkdown>
            </div>
          </div>
        ))}
      </div>
    </div>
  );

  return (
    <div className="w-full max-w-4xl mx-auto mt-10 animate-fade-in-up">
      <div className="bg-dark-bg-200/80 backdrop-blur-md border border-purple-500/30 rounded-3xl p-8 md:p-12 shadow-[0_0_50px_rgba(139,92,246,0.15)] relative">
        
        {/* Header */}
        <div className="flex items-center gap-4 mb-10 pb-6 border-b border-white/10">
          <div className="w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/30">
            <span className="text-3xl">üåå</span>
          </div>
          <div>
            <h2 className="text-3xl font-heading font-bold text-white">J≈´s≈≥ Kosminƒó Analizƒó</h2>
            <p className="text-purple-300">Paruo≈°ta: {report.meta.user}</p>
          </div>
        </div>

        {/* PLANETARY GRID */}
        {report.planetaryData && <PlanetaryGrid data={report.planetaryData} />}

        {/* FREE CONTENT */}
        <div className="space-y-12">
          {renderSection(freeSection)}
          {renderSection(emotionalSection)}
        </div>

        {/* PAYWALL / LOCKED CONTENT */}
        {!isUnlocked ? (
          <LockedSection 
            title="Karmos, Karjeros ir Ateities Prognozƒós" 
            price="19.00 ‚Ç¨" 
            onUnlock={handlePayment} 
          />
        ) : (
          <div className="mt-12 pt-12 border-t border-dashed border-purple-500/30 animate-fade-in-up">
            <div className="mb-8 p-4 bg-green-500/10 border border-green-500/20 rounded-xl text-green-200 text-center text-sm">
              ‚ú® Mokƒójimas sƒókmingas! Pilna ataskaita atrakinta.
            </div>
            
            {/* Render Locked Sections */}
            {lockedSections.map(sec => renderSection(sec))}

            {/* PDF DOWNLOAD (Only visible after pay) */}
            <div className="mt-16 pt-8 border-t border-white/10 flex flex-col items-center text-center">
               <h3 className="text-xl font-bold text-white mb-4">J≈´s≈≥ Asmeninƒó Knyga Paruo≈°ta</h3>
               <p className="text-slate-400 mb-6 max-w-md">
                 Atsisi≈≥skite pilnƒÖ, profesionaliai sumaketuotƒÖ PDF versijƒÖ spausdinimui.
               </p>
               {isClient ? (
                 <PDFDownloadLink
                   document={<NumerologyReportPdf data={report} />}
                   fileName={`Analize_${report.meta.user.replace(/ /g, '_')}.pdf`}
                   className="group flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-bold text-lg shadow-xl shadow-purple-500/40 hover:scale-105 transition-all"
                 >
                   {({ loading }) => loading ? (
                       <><Loader2 className="animate-spin" /> Generuojama...</>
                     ) : (
                       <><Download /> Atsisi≈≥sti PDF KnygƒÖ</>
                     )
                   }
                 </PDFDownloadLink>
               ) : (
                 <button disabled className="px-8 py-4 bg-white/5 rounded-xl text-white">Kraunama...</button>
               )}
            </div>
          </div>
        )}

      </div>
    </div>
  );
}


--------------------------------------------------------------------------------
FILE: src\components\features\CalculatorForm.tsx
SIZE: 6535 bytes
--------------------------------------------------------------------------------
"use client";
import { useState } from "react";
import { Input } from "../ui/Input";
import { motion } from "framer-motion";
import { User, Gift, Calculator, ArrowRight } from "lucide-react";
import { AnalysisResult } from "./AnalysisResult";

interface SubmittedData {
  name: string;
  surname: string;
  birthDate: string;
  gender: string;
  type: 'self' | 'gift';
  giver?: string;
  occasion?: string;
}

export function CalculatorForm() {
  const [activeTab, setActiveTab] = useState<'self' | 'gift'>('self');
  const [loading, setLoading] = useState(false);
  const [analysis, setAnalysis] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);
  const [submittedData, setSubmittedData] = useState<SubmittedData | null>(null);

  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    setLoading(true);
    setAnalysis(null);
    setError(null);

    const formData = new FormData(e.currentTarget);
    const data: SubmittedData = {
      name: formData.get('name') as string,
      surname: formData.get('surname') as string,
      birthDate: formData.get('birthDate') as string,
      gender: formData.get('gender') as string,
      type: activeTab,
      giver: formData.get('giver') as string | undefined, // Only if gift
      occasion: formData.get('occasion') as string | undefined, // Only if gift
    };

    // Save the submitted data for PDF generation
    setSubmittedData(data);

    try {
      const res = await fetch('/api/analyze', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });

      const json = await res.json();

      if (!res.ok) throw new Error(json.error || "Klaida generuojant");
      
      // Handle both old format (json.result) and new FullReport format (json)
      setAnalysis(json.result || json);
    } catch (err: unknown) {
      setError(err instanceof Error ? err.message : "Klaida generuojant");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div id="analize" className="w-full max-w-4xl mx-auto p-4 relative z-20">
      
      {/* Glass Card Container */}
      <div className="bg-dark-bg-200/60 backdrop-blur-xl border border-white/10 rounded-3xl p-6 md:p-10 shadow-2xl shadow-purple-900/20">
        
        {/* Header */}
        <div className="text-center mb-10">
          <h2 className="text-3xl md:text-4xl font-heading font-bold text-white mb-3">
            Sukurkite Savo <span className="text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500">Analizƒô</span>
          </h2>
          <p className="text-text-medium">U≈æpildykite duomenis ir AI sugeneruos j≈´s≈≥ asmeninƒØ kodƒÖ.</p>
        </div>

        {/* Tabs */}
        <div className="flex p-1 bg-white/5 rounded-xl mb-8 w-fit mx-auto">
          <button
            onClick={() => setActiveTab('self')}
            className={`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-medium transition-all ${
              activeTab === 'self' ? 'bg-purple-600 text-white shadow-lg' : 'text-text-medium hover:text-white'
            }`}
          >
            <User size={18} /> Analizƒó Sau
          </button>
          <button
            onClick={() => setActiveTab('gift')}
            className={`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-medium transition-all ${
              activeTab === 'gift' ? 'bg-pink-600 text-white shadow-lg' : 'text-text-medium hover:text-white'
            }`}
          >
            <Gift size={18} /> Dovana Kitam
          </button>
        </div>

        {/* Form Inputs */}
        <form onSubmit={handleSubmit} className="space-y-6">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <Input name="name" label="Vardas (kaip dokumente)" placeholder="Vardenis" required />
            <Input name="surname" label="Pavardƒó (Gimimo)" placeholder="Pavardenis" required />
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <Input name="birthDate" type="date" label="Gimimo Data" required className="text-white/90" />
            <div className="w-full">
               <label className="block text-sm font-medium text-purple-200 mb-1.5 ml-1">Lytis (Gramatikai)</label>
               <select name="gender" className="flex h-12 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-500/50 hover:bg-white/10">
                 <option value="male" className="bg-dark-bg-200">Vyras</option>
                 <option value="female" className="bg-dark-bg-200">Moteris</option>
               </select>
            </div>
          </div>

          {activeTab === 'gift' && (
            <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} className="space-y-6 pt-4 border-t border-white/10">
               <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                 <Input name="giver" label="J≈´s≈≥ Vardas (Dovanotojo)" placeholder="Jonas" />
                 <Input name="occasion" label="Proga" placeholder="Gimtadienis, Kalƒódos..." />
               </div>
            </motion.div>
          )}

          <div className="pt-6">
            <button
              type="submit"
              disabled={loading}
              className="w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-white font-bold text-lg shadow-xl shadow-purple-500/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-70"
            >
              {loading ? (
                <span className="animate-spin">‚è≥</span>
              ) : (
                <>
                  <Calculator size={20} /> Generuoti Analizƒô <ArrowRight size={20} />
                </>
              )}
            </button>
            <p className="text-center text-xs text-white/30 mt-4">
              * Duomenys naudojami tik skaiƒçiavimams ir nƒóra kaupiami.
            </p>
          </div>
        </form>

        {/* Error Message */}
        {error && (
          <div className="mt-6 p-4 bg-red-500/20 border border-red-500/50 rounded-xl text-red-200 text-center">
            {error}
          </div>
        )}

      </div>

      {/* Result Display */}
      {analysis && <AnalysisResult content={analysis} userData={submittedData || undefined} />}
    </div>
  );
}


--------------------------------------------------------------------------------
FILE: src\components\features\PlanetaryGrid.tsx
SIZE: 2201 bytes
--------------------------------------------------------------------------------
import { Sun, Moon, Star, Heart, Flame, Zap, Crown } from "lucide-react";
import { PlanetaryPositions } from "../../types/analysis";

const planetConfig = [
  { key: 'sun', label: 'Saulƒó (Esmƒó)', icon: Sun, color: 'text-yellow-400' },
  { key: 'moon', label: 'Mƒónulis (Emocijos)', icon: Moon, color: 'text-blue-300' },
  { key: 'mercury', label: 'Merkurijus (Protas)', icon: Zap, color: 'text-teal-300' },
  { key: 'venus', label: 'Venera (Meilƒó)', icon: Heart, color: 'text-pink-400' },
  { key: 'mars', label: 'Marsas (Veiksmas)', icon: Flame, color: 'text-red-400' },
  { key: 'jupiter', label: 'Jupiteris (Sƒókmƒó)', icon: Crown, color: 'text-orange-300' },
];

export function PlanetaryGrid({ data }: { data: PlanetaryPositions }) {
  return (
    <div className="grid grid-cols-2 md:grid-cols-3 gap-4 mb-10">
      {planetConfig.map((planet) => (
        <div key={planet.key} className="bg-white/5 border border-white/10 rounded-xl p-4 flex items-center gap-3 hover:bg-white/10 transition-colors">
          <div className={`p-2 rounded-lg bg-white/5 ${planet.color}`}>
            <planet.icon size={20} />
          </div>
          <div>
            <div className="text-xs text-slate-400 uppercase tracking-wider">{planet.label}</div>
            <div className="text-lg font-heading font-bold text-white">
              {data[planet.key as keyof PlanetaryPositions]}
            </div>
          </div>
        </div>
      ))}
      {/* Life Path Card */}
      <div className="col-span-2 md:col-span-3 bg-gradient-to-r from-purple-900/40 to-indigo-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center justify-between">
         <div className="flex items-center gap-3">
            <div className="p-2 rounded-lg bg-purple-500/20 text-purple-300">
              <Star size={20} />
            </div>
            <div>
              <div className="text-xs text-purple-200 uppercase tracking-wider">Gyvenimo Kelias</div>
              <div className="text-sm text-slate-300">Pagrindinƒó j≈´s≈≥ misija</div>
            </div>
         </div>
         <div className="text-3xl font-heading font-bold text-white pr-4">{data.lifePath}</div>
      </div>
    </div>
  );
}


--------------------------------------------------------------------------------
FILE: src\components\layout\Footer.tsx
SIZE: 412 bytes
--------------------------------------------------------------------------------
export function Footer() {
  return (
    <footer className="bg-dark-bg-300 border-t border-white/5 py-12 relative z-10">
      <div className="container mx-auto px-4 text-center">
        <p className="text-slate-500 text-sm">
          ¬© {new Date().getFullYear()} Numerology.lt. Visos teisƒós saugomos.
          <br />
          Sukurta su meile ir AI magija.
        </p>
      </div>
    </footer>
  );
}


--------------------------------------------------------------------------------
FILE: src\components\layout\Navbar.tsx
SIZE: 2948 bytes
--------------------------------------------------------------------------------
"use client";
import Link from "next/link";
import { useState, useEffect } from "react";
import { cn } from "../../lib/utils";
import { Menu, X, Star } from "lucide-react";

export function Navbar() {
  const [scrolled, setScrolled] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 20);
    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  return (
    <header className={cn(
      "fixed top-0 left-0 right-0 z-50 py-4 transition-all duration-300",
      scrolled ? "bg-dark-bg-300/85 backdrop-blur-md border-b border-white/5 py-3" : "bg-transparent"
    )}>
      <div className="container mx-auto px-4 flex items-center justify-between">
        {/* Hexagon Logo Restoration */}
        <Link href="/" className="flex items-center gap-3 group">
          <div className="w-10 h-10 relative flex items-center justify-center transition-transform duration-300 group-hover:scale-110">
             {/* CSS Hexagon shape using clip-path */}
             <div className="absolute inset-0 bg-gradient-to-br from-pink-500 to-purple-600" style={{ clipPath: "polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)" }}></div>
             <Star className="w-5 h-5 text-white relative z-10 group-hover:rotate-12 transition-transform" fill="currentColor" />
          </div>
          <span className="font-heading font-bold text-xl tracking-tight text-white group-hover:text-primary-300 transition-colors">
            Numerology.lt
          </span>
        </Link>

        {/* Desktop Nav */}
        <nav className="hidden md:flex items-center space-x-1">
          {["Prad≈æia", "Apie", "Analizƒó", "Reik≈°mƒós", "DUK"].map((item) => (
            <Link key={item} href={`#${item.toLowerCase()}`} className="px-4 py-2 text-sm font-medium text-text-medium hover:text-white relative group">
              {item}
              <span className="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-300 group-hover:w-full" />
            </Link>
          ))}
        </nav>

        {/* Action Button */}
        <div className="flex items-center gap-4">
          <Link href="#analize" className="hidden md:inline-flex items-center justify-center px-6 py-2.5 text-sm font-semibold text-white transition-all duration-200 bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 bg-[length:200%_auto] hover:bg-right rounded-lg shadow-lg shadow-purple-500/20 hover:-translate-y-0.5">
            Gauti Analizƒô
          </Link>
          
          {/* Mobile Toggle */}
          <button className="md:hidden text-text-light p-2" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
            {mobileMenuOpen ? <X /> : <Menu />}
          </button>
        </div>
      </div>
    </header>
  );
}


--------------------------------------------------------------------------------
FILE: src\components\pdf\NumerologyReportPdf.tsx
SIZE: 8705 bytes
--------------------------------------------------------------------------------
"use client";
import { Document, Page, Text, View, StyleSheet, Font } from "@react-pdf/renderer";
import { FullReport } from "../../types/analysis";

// Register Playfair Display for Headings
Font.register({
  family: "Playfair",
  src: "https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/PlayfairDisplay/PlayfairDisplay-Bold.ttf",
});

// Keep Roboto for body text (better readability for long Lithuanian text)
Font.register({
  family: "Roboto",
  src: "https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-regular-webfont.ttf",
});

const styles = StyleSheet.create({
  page: {
    backgroundColor: "#ffffff",
    fontFamily: "Roboto",
    paddingBottom: 60, // Space for footer
  },
  // --- COSMIC COVER PAGE ---
  coverPage: {
    backgroundColor: "#0f172a", // Dark Background
    color: "white",
    height: "100%",
    position: "relative",
    display: "flex",
    flexDirection: "column",
    justifyContent: "center",
    alignItems: "center",
    padding: 20,
  },
  coverLogo: {
    fontSize: 12,
    letterSpacing: 4,
    color: "#a78bfa", // Purple-400
    marginBottom: 40,
    textTransform: "uppercase",
  },
  coverTitle: {
    fontFamily: "Playfair",
    fontSize: 42,
    textAlign: "center",
    color: "#ffffff",
    marginBottom: 10,
  },
  coverSubtitle: {
    fontSize: 16,
    color: "#fbbf24", // Gold
    textTransform: "uppercase",
    letterSpacing: 3,
    marginBottom: 50,
  },
  coverName: {
    fontFamily: "Playfair",
    fontSize: 32,
    color: "#ffffff",
    textAlign: "center",
    marginTop: 20,
    paddingVertical: 15,
    width: "80%",
  },
  coverDate: {
    position: "absolute",
    bottom: 50,
    fontSize: 10,
    color: "#64748b",
  },

  // --- CONTENT PAGES ---
  header: {
    flexDirection: "row",
    justifyContent: "space-between",
    alignItems: "center",
    marginHorizontal: 35,
    marginTop: 35,
    marginBottom: 20,
    paddingBottom: 10,
  },
  headerTitle: {
    fontFamily: "Playfair",
    fontSize: 10,
    color: "#6366f1", // Primary Color
    textTransform: "uppercase",
  },
  headerName: {
    fontSize: 9,
    color: "#94a3b8",
  },
  contentContainer: {
    paddingHorizontal: 40,
  },
  sectionTitle: {
    fontFamily: "Playfair",
    fontSize: 22,
    color: "#1e293b", // Slate-800
    marginTop: 25,
    marginBottom: 15,
  },
  blockTitle: {
    fontFamily: "Playfair",
    fontSize: 16,
    color: "#334155", // Slate-700
    marginTop: 20,
    marginBottom: 8,
    fontWeight: "bold",
  },
  paragraph: {
    fontSize: 11,
    lineHeight: 1.8, // More breathable line height
    color: "#334155", // Slate-700
    marginBottom: 12,
    textAlign: "justify",
  },
  divider: {
    width: 30,
    height: 3,
    backgroundColor: "#fbbf24", // Gold accent
    marginBottom: 20,
    marginTop: 5,
  },
  footer: {
    position: "absolute",
    bottom: 20,
    left: 40,
    right: 40,
    flexDirection: "row",
    justifyContent: "space-between",
    paddingTop: 10,
  },
  footerText: {
    fontSize: 8,
    color: "#cbd5e1",
  },
  pageNumber: {
    fontSize: 9,
    color: "#6366f1",
    fontFamily: "Playfair",
  },
  // Decorative elements
  decorativeCircleOuter: {
    width: 60,
    height: 60,
    borderRadius: 30,
    backgroundColor: 'rgba(99, 102, 241, 0.2)',
    marginBottom: 20,
    alignItems: 'center',
    justifyContent: 'center',
  },
  decorativeCircleInner: {
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: 'rgba(99, 102, 241, 0.5)',
  },
  birthDateText: {
    marginTop: 15,
    fontSize: 12,
    color: "#94a3b8",
  },
  // Icon styles
  iconContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 5,
  },
  icon: {
    fontSize: 16,
    color: '#fbbf24',
    marginRight: 10,
  },
  // Planetary Grid styles
  gridContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    marginBottom: 20,
    paddingHorizontal: 35,
  },
  gridItem: {
    width: '48%', // 2 columns
    backgroundColor: '#f8fafc',
    padding: 10,
    marginBottom: 10,
    marginRight: '2%',
    borderRadius: 4,
    borderWidth: 1,
    borderColor: '#e2e8f0',
  },
  gridLabel: {
    fontSize: 8,
    color: '#64748b',
    textTransform: 'uppercase',
    marginBottom: 2,
  },
  gridValue: {
    fontSize: 12,
    fontFamily: 'Playfair',
    color: '#1e293b',
  },
});

// Icon Mapper (Simple Text/Emoji version for stability)
const getIcon = (iconName?: string) => {
  switch(iconName) {
    case 'sun': return "‚òÄ";
    case 'moon': return "‚òæ";
    case 'heart': return "‚ù§";
    case 'star': return "‚òÖ";
    case 'fire': return "üî•";
    default: return "‚ú¶";
  }
};

// Helper function to clean markdown text
const cleanText = (text: string) => {
  return text
    .replace(/#{1,6}\s?/g, "") // Remove headings #
    .replace(/\*\*/g, "") // Remove bold **
    .replace(/\*/g, "") // Remove italics *
    .replace(/`/g, ""); // Remove code blocks
};

interface PdfProps {
  data: FullReport;
}

export const NumerologyReportPdf = ({ data }: PdfProps) => (
  <Document>
    {/* COVER PAGE (Use data.meta) */}
    <Page size="A4" style={styles.coverPage}>
      <Text style={styles.coverLogo}>NUMEROLOGY.LT</Text>
      
      {/* Decorative Circle */}
      <View style={styles.decorativeCircleOuter}>
         <View style={styles.decorativeCircleInner} />
      </View>

      <Text style={styles.coverTitle}>Asmeninƒó Analizƒó</Text>
      <Text style={styles.coverSubtitle}>KOSMOSO KODAS</Text>
      
      <Text style={styles.coverName}>{data.meta.user}</Text>
      
      <Text style={styles.birthDateText}>
        Gimimo data: {data.meta.birthDate}
      </Text>

      <Text style={styles.coverDate}>
        ¬© {new Date().getFullYear()} Numerology.lt | Generuota su AI
      </Text>
    </Page>

    {/* PLANETARY DATA PAGE */}
    {data.planetaryData && (
      <Page size="A4" style={styles.page}>
        <View style={styles.header} fixed>
          <Text style={styles.headerTitle}>Planet≈≥ I≈°sidƒóstymas</Text>
          <Text style={styles.headerName}>{data.meta.user}</Text>
        </View>

        <View style={styles.contentContainer}>
          <Text style={styles.sectionTitle}>J≈´s≈≥ Kosminis Pasas</Text>
          
          <View style={styles.gridContainer}>
            {[
              { label: "Saulƒó", value: data.planetaryData?.sun },
              { label: "Mƒónulis", value: data.planetaryData?.moon },
              { label: "Merkurijus", value: data.planetaryData?.mercury },
              { label: "Venera", value: data.planetaryData?.venus },
              { label: "Marsas", value: data.planetaryData?.mars },
              { label: "Jupiteris", value: data.planetaryData?.jupiter },
              { label: "Saturnas", value: data.planetaryData?.saturn },
              { label: "Gyvenimo Kelias", value: data.planetaryData?.lifePath.toString() },
            ].map((item, i) => (
              <View key={i} style={styles.gridItem}>
                <Text style={styles.gridLabel}>{item.label}</Text>
                <Text style={styles.gridValue}>{item.value || "-"}</Text>
              </View>
            ))}
          </View>
        </View>
        
        {/* Footer */}
        <View style={styles.footer} fixed>
          <Text style={styles.footerText}>Numerology.lt - J≈´s≈≥ asmeninis gidas</Text>
          <Text style={styles.pageNumber} render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`} />
        </View>
      </Page>
    )}

    {/* DYNAMIC CONTENT PAGES */}
    {data.sections.map((section, index) => (
      <Page key={index} size="A4" style={styles.page} wrap>
        <View style={styles.header} fixed>
           <Text style={styles.headerTitle}>{section.title}</Text>
           <Text style={styles.headerName}>{data.meta.user}</Text>
        </View>

        <View style={styles.contentContainer}>
          {section.blocks.map((block, bIndex) => (
            <View key={bIndex} wrap={false} style={{ marginBottom: 20 }}>
              <View style={styles.iconContainer}>
                <Text style={styles.icon}>
                  {getIcon(block.icon)}
                </Text>
                <Text style={styles.blockTitle}>{block.title}</Text>
              </View>
              <Text style={styles.paragraph}>{cleanText(block.content)}</Text>
            </View>
          ))}
        </View>
        
        {/* Footer */}
        <View style={styles.footer} fixed>
           <Text style={styles.footerText}>Numerology.lt - J≈´s≈≥ asmeninis gidas</Text>
           <Text style={styles.pageNumber} render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`} />
        </View>
      </Page>
    ))}
  </Document>
);


--------------------------------------------------------------------------------
FILE: src\components\ui\Input.tsx
SIZE: 977 bytes
--------------------------------------------------------------------------------
import React from 'react';
import { cn } from "../../lib/utils";

interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string;
}

export const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, label, ...props }, ref) => {
    return (
      <div className="w-full">
        {label && <label className="block text-sm font-medium text-purple-200 mb-1.5 ml-1">{label}</label>}
        <input
          className={cn(
            "flex h-12 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white shadow-sm transition-all file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-white/30 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-500/50 disabled:cursor-not-allowed disabled:opacity-50 hover:bg-white/10",
            className
          )}
          ref={ref}
          {...props}
        />
      </div>
    );
  }
);
Input.displayName = "Input";


--------------------------------------------------------------------------------
FILE: src\components\ui\LockedSection.tsx
SIZE: 2317 bytes
--------------------------------------------------------------------------------
"use client";
import { Lock } from "lucide-react";

interface LockedSectionProps {
  title: string;
  price: string;
  onUnlock: () => void;
}

export function LockedSection({ title, price, onUnlock }: LockedSectionProps) {
  return (
    <div className="relative w-full mt-8 rounded-3xl overflow-hidden border border-white/5">
      {/* Background (Blurred Content Simulation) */}
      <div className="p-8 filter blur-sm opacity-50 select-none pointer-events-none bg-dark-bg-200/50">
        <h3 className="text-2xl font-heading font-bold text-white mb-4">{title}</h3>
        <p className="text-slate-300 mb-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        <p className="text-slate-300 mb-4">Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <div className="h-40 bg-white/5 rounded-xl"></div>
      </div>

      {/* Overlay (The Paywall) */}
      <div className="absolute inset-0 z-10 flex flex-col items-center justify-center bg-gradient-to-t from-dark-bg-300 via-dark-bg-300/80 to-transparent">
        <div className="bg-dark-bg-200 border border-purple-500/30 p-8 rounded-2xl shadow-2xl text-center max-w-md mx-4 transform transition-all hover:scale-105">
          <div className="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/40">
            <Lock className="text-white w-6 h-6" />
          </div>
          <h3 className="text-xl font-bold text-white mb-2">Atrakinti PilnƒÖ Analizƒô</h3>
          <p className="text-slate-400 text-sm mb-6">
            Gaukite priƒójimƒÖ prie Karmos, Karjeros, Ateities prognozi≈≥ ir atsisi≈≥skite PDF knygƒÖ.
          </p>
          <div className="text-3xl font-bold text-white mb-6">
            {price} <span className="text-sm text-slate-500 font-normal">/ vienkartinis</span>
          </div>
          <button 
            onClick={onUnlock}
            className="w-full py-3 px-6 bg-gradient-to-r from-amber-400 to-orange-500 text-black font-bold rounded-xl shadow-lg hover:shadow-orange-500/25 transition-all active:scale-95"
          >
            Atrakinti Dabar
          </button>
        </div>
      </div>
    </div>
  );
}


--------------------------------------------------------------------------------
FILE: src\components\ui\ParticlesBackground.tsx
SIZE: 1472 bytes
--------------------------------------------------------------------------------
"use client";
import { useCallback } from "react";
import type { Engine } from "tsparticles-engine";
import Particles from "react-tsparticles";
import { loadSlim } from "tsparticles-slim";

export default function ParticlesBackground() {
  const particlesInit = useCallback(async (engine: Engine) => {
    await loadSlim(engine);
  }, []);

  return (
    <Particles
      id="tsparticles"
      init={particlesInit}
      className="absolute inset-0 z-0"
      options={{
        fullScreen: { enable: false },
        background: { color: { value: "transparent" } },
        fpsLimit: 120,
        interactivity: {
          events: {
            onHover: { enable: true, mode: "bubble" },
            resize: true,
          },
          modes: {
            bubble: { distance: 120, size: 4, duration: 2, opacity: 0.9, speed: 3 },
          },
        },
        particles: {
          color: { value: ["#ffffff", "#ddd6fe", "#fbcfe8", "#a78bfa"] },
          links: { enable: false },
          move: { enable: true, direction: "none", random: true, speed: 0.5, straight: false, outModes: { default: "out" } },
          number: { density: { enable: true, area: 800 }, value: 80 },
          opacity: { value: 0.6, random: true, animation: { enable: true, speed: 0.7, minimumValue: 0.15, sync: false } },
          shape: { type: "circle" },
          size: { value: { min: 1, max: 2.5 }, random: true },
        },
        detectRetina: true,
      }}
    />
  );
}


--------------------------------------------------------------------------------
FILE: src\lib\numerology.ts
SIZE: 2901 bytes
--------------------------------------------------------------------------------
// Numerology Logic - Pythagorean System + Scientific Astrology

import { Body, Observer, GeoVector } from 'astronomy-engine';

// Mapping Lithuanian letters to numbers
const letterMap: Record<string, number> = {
  a: 1, ƒÖ: 1, j: 1, s: 1, ≈°: 1, b: 2, k: 2, t: 2, c: 3, ƒç: 3, l: 3, u: 3, ≈≥: 3, ≈´: 3,
  d: 4, m: 4, v: 4, e: 5, ƒô: 5, ƒó: 5, n: 5, w: 5, f: 6, o: 6, x: 6, g: 7, p: 7, y: 7,
  h: 8, q: 8, z: 8, ≈æ: 8, i: 9, r: 9
};
const vowels = ['a', 'ƒÖ', 'e', 'ƒô', 'ƒó', 'i', 'ƒØ', 'y', 'o', 'u', '≈≥', '≈´'];

export function reduceNumber(num: number): number {
  if (num <= 9 || num === 11 || num === 22 || num === 33) return num;
  const sum = num.toString().split('').reduce((acc, d) => acc + parseInt(d), 0);
  return reduceNumber(sum);
}

export function calculateLifePath(dateStr: string): number {
  if (!dateStr) return 0;
  const [year, month, day] = dateStr.split('-').map(Number);
  return reduceNumber(reduceNumber(year) + reduceNumber(month) + reduceNumber(day));
}

export function calculateNameNumbers(fullName: string) {
  const cleanName = fullName.toLowerCase().replace(/[^a-ƒÖ≈æ]/g, '');
  let expressionSum = 0, soulSum = 0, personalitySum = 0;
  for (const char of cleanName) {
    const val = letterMap[char] || 0;
    expressionSum += val;
    if (vowels.includes(char)) soulSum += val;
    else personalitySum += val;
  }
  return {
    expression: reduceNumber(expressionSum),
    soulUrge: reduceNumber(soulSum),
    personality: reduceNumber(personalitySum)
  };
}

// --- ASTROLOGY SECTION (Scientific) ---

function getZodiacFromLongitude(lon: number) {
  const signs = ["Avinas", "Jautis", "Dvyniai", "Vƒó≈æys", "Li≈´tas", "Mergelƒó", "Svarstyklƒós", "Skorpionas", "≈†aulys", "O≈æiaragis", "Vandenis", "≈Ωuvys"];
  // Normalize longitude to 0-360
  const normalizedLon = ((lon % 360) + 360) % 360;
  const index = Math.floor(normalizedLon / 30);
  return signs[index];
}

export function getZodiacSign(dateStr: string): { name: string; symbol: string } {
  // Simple lookup for UI consistency, but calculation below is better
  const positions = calculatePlanetaryPositions(new Date(dateStr));
  return { name: positions.sun, symbol: "‚òÄ" };
}

export function calculatePlanetaryPositions(date: Date) {
  // Default Observer (Vilnius roughly, affects Moon slightly due to parallax but acceptable for general charts)
  const observer = new Observer(54.68, 25.27, 0); 
  
  const getSign = (body: Body) => {
    const vector = GeoVector(body, date, true);
    // Convert vector coordinates to ecliptic longitude
    const lon = Math.atan2(vector.y, vector.x) * 180 / Math.PI;
    return getZodiacFromLongitude(lon);
  };

  return {
    sun: getSign(Body.Sun),
    moon: getSign(Body.Moon),
    mercury: getSign(Body.Mercury),
    venus: getSign(Body.Venus),
    mars: getSign(Body.Mars),
    jupiter: getSign(Body.Jupiter),
    saturn: getSign(Body.Saturn)
  };
}


--------------------------------------------------------------------------------
FILE: src\lib\prompts.ts
SIZE: 3346 bytes
--------------------------------------------------------------------------------
interface PromptData {
  name: string;
  lifePath: number;
  expression: number;
  personality: number;
  zodiac: string;
  moonSign?: string;
  venusSign?: string;
  marsSign?: string;
  jupiterSign?: string;
  saturnSign?: string;
}

// Helper to enforce JSON format
export const JSON_INSTRUCTION = `
  RESPONSE FORMAT:
  You must respond with valid JSON only. Do not wrap in markdown code blocks.
  Structure your response to match the requested schema exactly.
`;

export const GET_IDENTITY_PROMPT = (data: PromptData) => `
  Analyze the "Core Identity" for: ${data.name}, Life Path: ${data.lifePath}, Sun Sign: ${data.zodiac}.
  
  Return JSON object:
  {
    "title": "Tavo Kosminis DNR",
    "blocks": [
      { "title": "Gyvenimo Kelio Esmƒó", "content": "Deep paragraph about Life Path ${data.lifePath}...", "icon": "star" },
      { "title": "Saulƒós Energija", "content": "Deep paragraph about Sun in ${data.zodiac}...", "icon": "sun" }
    ]
  }
  ${JSON_INSTRUCTION}
`;

export const GET_EMOTIONAL_PROMPT = (data: PromptData) => `
  Analyze "Love & Emotions" for Moon in ${data.moonSign} and Venus in ${data.venusSign}.
  
  Return JSON object:
  {
    "title": "≈†irdies ir Jausm≈≥ Pasaulis",
    "blocks": [
      { "title": "Emocinis Saugumas (Mƒónulis)", "content": "Analysis of Moon in ${data.moonSign}...", "icon": "moon" },
      { "title": "Meilƒós Kalba (Venera)", "content": "Analysis of Venus in ${data.venusSign}...", "icon": "heart" }
    ]
  }
  ${JSON_INSTRUCTION}
`;

export const GET_KARMA_PROMPT = (data: PromptData) => `
  Analyze "Karma, Challenges & Life Lessons".
  Saturn is in: ${data.saturnSign}.
  Personality Number: ${data.personality}.
  
  Return JSON object:
  {
    "title": "Karmos Pamokos ir I≈°≈°≈´kiai",
    "blocks": [
      { "title": "Saturno Mokykla", "content": "Analysis of Saturn in ${data.saturnSign} regarding discipline and karma...", "icon": "fire" },
      { "title": "I≈°orinis Pasaulis", "content": "Analysis of Personality number ${data.personality} - how others see you vs reality...", "icon": "star" }
    ]
  }
  ${JSON_INSTRUCTION}
`;

export const GET_CAREER_PROMPT = (data: PromptData) => `
  Analyze "Career, Ambition & Success".
  Mars is in: ${data.marsSign}.
  Jupiter is in: ${data.jupiterSign}.
  Expression Number: ${data.expression}.
  
  Return JSON object:
  {
    "title": "Karjera ir Sƒókmƒó",
    "blocks": [
      { "title": "Veiksmo Energija (Marsas)", "content": "Analysis of Mars in ${data.marsSign} regarding work style...", "icon": "fire" },
      { "title": "Sƒókmƒós Faktorius (Jupiteris)", "content": "Analysis of Jupiter in ${data.jupiterSign} regarding luck and expansion...", "icon": "star" },
      { "title": "Pa≈°aukimas", "content": "Analysis of Expression number ${data.expression}...", "icon": "sun" }
    ]
  }
  ${JSON_INSTRUCTION}
`;

export const GET_FUTURE_PROMPT = (data: PromptData) => `
  Provide a "Future Outlook" for the coming year.
  Based on Life Path: ${data.lifePath}.
  
  Return JSON object:
  {
    "title": "Ateities Perspektyvos",
    "blocks": [
      { "title": "Met≈≥ Energija", "content": "Forecast based on Personal Year cycle (calculate 2025 + ${data.lifePath})...", "icon": "moon" },
      { "title": "Patarimas Ateiƒçiai", "content": "Final spiritual advice...", "icon": "heart" }
    ]
  }
  ${JSON_INSTRUCTION}
`;


--------------------------------------------------------------------------------
FILE: src\lib\utils.ts
SIZE: 169 bytes
--------------------------------------------------------------------------------
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}


--------------------------------------------------------------------------------
FILE: src\types\analysis.ts
SIZE: 772 bytes
--------------------------------------------------------------------------------
export type AnalysisSectionType = 'cover' | 'text_chapter' | 'planetary_row' | 'numerology_grid';

export interface PlanetaryPositions {
  sun: string;
  moon: string;
  mercury: string;
  venus: string;
  mars: string;
  jupiter: string;
  saturn: string;
  lifePath: number;
  soulUrge: number;
}

export interface AnalysisBlock {
  title: string;
  content: string; // Markdown supported
  icon?: string; // 'sun', 'moon', 'heart', 'star', 'fire'
}

export interface AnalysisSection {
  id: string;
  type: AnalysisSectionType;
  title: string;
  blocks: AnalysisBlock[];
}

export interface FullReport {
  meta: {
    user: string;
    birthDate: string;
    generatedAt: string;
  };
  planetaryData: PlanetaryPositions; // NEW FIELD
  sections: AnalysisSection[];
}


================================================================================
EXPORT SUMMARY
Files exported: 25
Total size: 58758 bytes (57.4 KB)
================================================================================
